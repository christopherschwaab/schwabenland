# Copyright 2013 Christopher Schwaab
# Distributed under the terms of the GNU General Public License v2

require autotools [ supported_autoconf=[ 2.5 ] supported_automake=[ 1.13 ] ]

SUMMARY="A small, easy to use Open Source Database Connection Pool Library."
DESCRIPTION="
An open source database connection pool library featuring
    * a thread safe Database Connection Pool,
    * connections to multiple database systems,
    * zero runtime configuration, connection using a URL scheme and
    * support for MySQL, PostgreSQL, SQLite and Oracle.
"
HOMEPAGE="http://www.tildeslash.com/libzdb/"
DOWNLOADS="http://www.tildeslash.com/libzdb/dist/${PNV}.tar.gz"

LICENCES="GPL"
SLOT="0"
PLATFORMS="~amd64 ~x86"
MYOPTIONS="
    sqlite
    mysql
    postgresql
    profiling [[ description = [ Enable profiling. ] ]]
    openssl
    sqliteunlock [[ description = [ SQLite unlock notification API to improve SQLite concurrency when libzdb and SQLite are used from a multi-threaded program. ] ]]
    "

DEPENDENCIES="
    build+run:
        postgresql? ( dev-db/postgresql )
        sqlite? ( dev-db/sqlite )
        mysql? ( dev-db/mysql )
        openssl? ( dev-libs/openssl )
"

BUGS_TO=""

DEFAULT_SRC_CONFIGURE_PARAMS=( --enable-optimized --enable-protected )
DEFAULT_SRC_CONFIGURE_OPTION_WITHS=( sqlite postgresql mysql )
DEFAULT_SRC_CONFIGURE_OPTION_ENABLES=( profiling )


