# Copyright 2013 Christopher Schwaab
# Distributed under the terms of the GNU General Public License v2

require github [ user='ellzey' rev=${PV} ] cmake

SUMMARY="A more flexible replacement for libevent's httpd API."
HOMEPAGE="https://github.com/ellzey/libevhtp"

LICENCES="BSD-3"
SLOT="0"
PLATFORMS="~amd64 ~x86"
# FIXME need to add support for -D*_DISABLE_*:STRING=ON
#MYOPTIONS="
#    ssl
#    evthread
#    regex
#"

DEPENDENCIES="
    build+run:
        dev-libs/libevent
        dev-libs/openssl
        dev-libs/oniguruma
"

src_prepare() {
    sed -i "s~set (LIB_INSTALL_DIR \"\${CMAKE_INSTALL_PREFIX}/lib\")~set (LIB_INSTALL_DIR \"\${CMAKE_INSTALL_PREFIX}/$LIBDIR\")~" \
           "${WORK}/CMakeLists.txt"
    default
}
