# Copyright 2012 Nikolay Orlyuk
# Distributed under the terms of the GNU General Public License v2

require github \
        autotools [ supported_automake=[ 1.12 ] supported_autoconf=[ 2.5 ] ]

SUMMARY="The F# compiler, core library and core tools (open source edition)"

LICENCES="Apache-2.0"
SLOT="0"
PLATFORMS="~amd64"
MYOPTIONS=""

DEPENDENCIES="
    build:
        virtual/pkg-config
    build+run:
        dev-lang/mono[>=2.9]
"

DEFAULT_SRC_CONFIGURE_PARAMS=( --with-gacdir=/usr/${LIBDIR:-lib}/mono/gac )

src_prepare() {
    sed -i 's~libdir := ${prefix}/lib/~libdir := @libdir@/~' config.make.in
    sed -i 's~<Import Project="$(DESTDIR)~<Import Project="~g' \
           src/fsharp/targets.make
    autotools_src_prepare
}
